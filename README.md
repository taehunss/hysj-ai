# 한양사주 AI (hanyangsaju-ai)

한양사주는 “무료 무제한 질의응답”을 기본으로 제공하고, 사용자가 자연스럽게 구독·전문가 연결·커뮤니티로 확장하도록 유도하는 구조의 서비스입니다. 기존 사주 앱의 질문당 과금 모델 대비 진입장벽을 낮추고, 장기적으로 높은 구독 전환을 목표로 합니다.

## 핵심 가치 제안

- 무료 무제한 Q&A: 누구나 제한 없이 AI에게 질문하고 상담
- 자연스러운 확장: 구독, 전문가 연결, 커뮤니티로의 점진적 업셀링
- 차별화: 질문당 과금이 아닌, 구독/하이브리드 기반의 지속가능 BM

## 모노레포 개요

본 레포지토리는 프론트엔드(웹)와 백엔드(크롤링, DB 관리, 서비스 API)를 하나의 모노레포로 관리합니다.

- 예정 구조(초안)
  - `apps/web`: 웹 프론트엔드 (예: Next.js 등)
  - `apps/api`: 서비스 API (NestJS)
  - `apps/crawler`: 데이터 크롤러/배치 작업
  - `packages/shared`: 공통 타입/유틸/SDK
  - `packages/ui` (옵션): 공용 UI 컴포넌트

- 현재 상태(초기)
  - `apps/api`에 해당하는 NestJS 기반 서버 코드가 루트에 위치한 상태이며, 추후 디렉터리 리팩터링을 통해 위 구조로 이관 예정입니다.

## 비즈니스 모델 (BM)

1. 무료 기본 서비스 (AI 채팅 무제한)
   - 모든 사용자가 질문 개수 제한 없이 AI 상담 가능
   - 단, 광고 노출 / 대화 저장 기간 7일 / PDF 리포트 미제공

2. 구독형 서비스
   - 프리미엄 (월 9,900원)
     - 광고 제거, 일/주/월 운세 리포트 PDF 제공
     - 대화 기록 무제한 저장, 테마별 분석(연애/금전/직업 등)
   - VIP (월 29,900~49,000원)
     - 모든 기능 무제한
     - 심화 분석 리포트 + 궁합 매칭 기능 제공

3. 전문가 상담 연결 (하이브리드)
   - 원할 경우 전문 사주 상담가 연결
   - 채팅/전화 상담: 10분당 30,000원 과금, 수익 쉐어

4. 커뮤니티 & 궁합 매칭 (확장 단계)
   - 사용자 경험 공유 커뮤니티
   - AI 기반 궁합 매칭(연애/비즈니스), 매칭 신청 건당 5,000원

## 사주 전문가 데이터 범위

1. 해석용 지식 베이스
   - API 제공 명식(년·월·일·시, 천간/지지) 기반 해석 규칙
   - 오행 상생·상극, 10십성(비견/겁재/식신/상관/정재/편재/정관/편관/정인/편인)
   - 12운성, 신살, 합충형파해 등 심화 규칙

2. 사용자 맞춤 응답 패턴
   - 초심자: 운세/성격 요약 중심
   - 중급자: 일주/대운/세운 중심 심화 해석
   - 고급자: 전통 용어와 응용 해석 포함

3. Q&A 샘플 데이터
   - 예) “제 성향은 어떤가요?” → 초보/중급/고급 3단계 답변 샘플
   - 예) “올해 운은?” → 세운/대운 연계 답변 패턴

## 역할 분담(초안)

- 사주 명리학 (김강필)
  - 해석 규칙 및 응답 패턴 정의
  - 레벨별(초보~고급) 응답 스타일 샘플 제공
  - Q&A 예시 DB 구축

- 개발/데이터/서버 (김태훈)
  - 갑술만세력 API 연동 (출생정보 → 사주 명식 호출)
  - DB/AI 모델에 해석 규칙 반영
  - 챗봇 UI/UX (웹 → 앱 확장)
  - 구독/결제, 사용자 히스토리 저장 기능 구현

## 제작 일정(예상 로드맵)

- 1개월차: 외부 API 연동 + 기본 챗봇 UI 완성
- 2개월차: 해석 규칙 적용, Q&A 패턴 학습 → 내부 테스트
- 3개월차: 결제/구독 모듈 구현 + 베타 런칭

## 기술 스택(초안)

- Backend: NestJS (Node.js, TypeScript)
- Frontend: (TBD) Next.js 또는 React 기반 웹
- DB/스토리지: (TBD) 예: PostgreSQL, Redis, S3 등
- Infra: (TBD) CI/CD, 모니터링, 로깅 도입 예정

## 로컬 개발 가이드 (현재: Backend/NestJS)

### 요구사항

- Node.js LTS, Yarn

### 설치

```bash
yarn install
```

### 실행

```bash
# 개발 모드 (자동 재시작)
yarn start:dev

# 일반 실행
yarn start

# 프로덕션 빌드 & 실행
yarn build
yarn start:prod
```

### 테스트

```bash
# 단위 테스트
yarn test

# e2e 테스트
yarn test:e2e

# 커버리지
yarn test:cov
```

### 코드 품질

```bash
# 포맷팅
yarn format

# 린트
yarn lint
```

### 환경 변수

- 추후 `.env` / `.env.local` 등을 통해 외부 API 키(예: 갑술만세력 API), DB 연결 정보 등을 주입합니다.
- 예시 파일: `.env.example` (추가 예정)

## 외부 API 연동 (갑술만세력 API)

- 출생정보 입력 → 명식(년·월·일·시, 천간/지지) 호출 → 규칙 기반 해석 파이프라인에 전달
- 인증/요금/쿼터 정책은 API 공급자 규정을 준수하며, 키는 서버 비밀 변수로 관리합니다.

## 향후 디렉터리 구조(예시)

```text
hanyangsaju-ai/
  apps/
    web/            # 프론트엔드(웹)
    api/            # 서비스 API (NestJS)
    crawler/        # 크롤러/배치 작업
  packages/
    shared/         # 공통 타입/유틸
    ui/             # 공용 UI 컴포넌트(옵션)
```

## 보안/프라이버시(초안)

- 최소 수집 원칙, 가명 처리, 보존 기간 명시(예: 무료 플랜 7일), 암호화 저장
- 이용자 로그/대화 데이터의 목적 외 사용 금지, 파기 정책 수립

## 라이선스

- 본 레포지토리는 현재 `UNLICENSED` 상태입니다. 배포/사용 정책은 추후 공지합니다.

## 기여

- Issue/PR 환영. 초기 구조 안정화 전까지는 핵심 모듈 위주 변경을 권장합니다.
# hysj-ai
